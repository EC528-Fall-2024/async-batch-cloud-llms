
## Deploy 
#The folowing command deploys the function from the terminal
gcloud functions deploy batch-processor-http \
--runtime=python312 \
--region=us-central1 \
--source=. \
--entry-point=go \
--trigger-http \
--allow-unauthenticated


## Testing Locally

# How to check and see what the URL is:
gcloud functions describe python-http-function --gen2 --region us-central1 --format="value(url)"

# The following command will run the function locally. Move into the functions folder and run the following command
functions-framework --target=go

# Curl Command to invoke the deployed function
curl --location 'https://us-central1-elated-scope-437703-h9.cloudfunctions.net/batch-processor-http' \
--header 'Content-Type: application/json' \
--data '{
    "Job_ID": "job43",
    "Client_ID": "rick sorkin"
}'

# Curl Command to invoke the local function (deployed using the functions-framework above)
curl --location 'http://127.0.0.1:8080' \
--header 'Content-Type: application/json' \
--data '{
    "Job_ID": "job43",
    "Client_ID": "rick sorkin"
}'
